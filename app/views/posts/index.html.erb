<div class="container">
  <h2 class="text-center mt-5">Trend</h2>
  <div class="row mx-auto d-flex justify-content-center mt-5">
    <% @posts.each do |info| %>
        <div class="col-12 col-md-6 mt-3">
          <div class="card">
            <div class="card-body text-center">
              <h5 class="card-title text-center">
                <% if info.title.length > 13 %>
                  <%= info.title.slice(0,13) %> ...
                <% else %>
                  <%= info.title %>
                <% end %>
              </h5>
              <p class="card-text">
                <span class="ellipsis-text" data-full-text="<%= info.url %>">
                  <% if info.url.length > 31 %>
                    <%= info.url.slice(0,31) %> ...
                  <% else %>
                    <%= info.url %>
                  <% end %>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>

<script>
  const ellipsisTexts = document.querySelectorAll('.ellipsis-text');

  ellipsisTexts.forEach((element) => {
    const fullText = element.getAttribute('data-full-text');
    const maxLength = 31;

    if (fullText.length > maxLength) {
      const truncatedText = fullText.slice(0, maxLength) + '...';
      element.textContent = truncatedText;

      element.addEventListener('click', () => {
        if (element.textContent === truncatedText) {
          element.textContent = fullText;
        } else {
          element.textContent = truncatedText;
        }
      });
    }
  });
</script>